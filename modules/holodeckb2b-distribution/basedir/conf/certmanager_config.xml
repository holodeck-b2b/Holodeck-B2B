<?xml version="1.0" encoding="UTF-8"?>
<!-- =====================================================================================

             Holodeck B2B Default Certificate Manager Configuration

This file configures the access to the keystores used by the default implementation
of the Certificate Manager to store the key pairs and certificates needed in the 
processing of the messages. It uses three  JKS keystores which contain the keys and 
certificates needed in specific actions:
* The key pairs used for signing and decrypting messages and to use for TLS client 
  authentication. Note that a key pair may need to contain more than one certificate if 
  a certificate chain needs to be included in a signature or TLS handshake.
* The trading partner certificates with public keys used for encryption of messages and 
  identification.
* Holding "trust anchors" used for trust validation of certificates used to sign messages
  and to validate TLS server certificates. Normally these are the certificates of trusted 
  Certificate Authorities. 

Since TLS certificates are often issued by one of the common and well-known Certificate 
Authorities the default Certificate Manager implementation also uses the JVM default
trust store for trust validation of TLS certificates. The use of this default trust store
can be fine tuned by the <i>IncludeDefaultTrustStore</i> parameter. 
As in some environments the certificates of trading partner are directly trusted the 
<i>direct trust</i> mode can be enabled in which case the trading partner certificates 
are handled like trust anchors, with the exception that they are checked for validity. 
<p>Another feature of this Certificate Manager is the option to perform a revocation 
check using OCSP on certificates. This check is disabled by default for back-ward 
compatibility and can be enabled in the configuration. Note however that when enabled and 
used in an environment where certificates don't provide OCSP information this will result 
in a lot of <code>ISignatureVerifiedWithWarning</code> events as the revocation check 
could not be executed.
===================================================================================== -->
<CertManagerConfiguration xmlns="http://holodeck-b2b.org/schemas/2019/09/config/certmanager"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://holodeck-b2b.org/schemas/2019/09/config/certmanager ../repository/xsd/hb2b-certmanager-cfg.xsd">
    <!--
    <PerformRevocationCheck>false</PerformRevocationCheck>
    <DirectTrustPartnerCertificates>false</DirectTrustPartnerCertificates>        
    -->
    <!--
        The value set in the IncludeDefaultTrustStore element defines how the 
        Certificate Manager uses the JVM default trust store when validating
        the trust of certificates. The possible values are:
        - never : don't use the default trust store at all. You must ensure
            the trusted CA's are imported in the Certificate Manager's trust
            store.
        - tlsOnly : use the default trust store only for validation of 
            TLS certificates
        - mlsOnly : use the default trust store only for validation of 
            certificates used to sign messages
        - always : always use the default trust store
        NOTE: When used, the certificates in default trust store are added to
            the certificates included in the Certificate Manager's trust store  
    -->
    <!--
    <IncludeDefaultTrustStore>tlsOnly</IncludeDefaultTrustStore>
    -->    
    <Keystores>
        <PrivateKeys>
            <Path>repository/certs/privatekeys.jks</Path>
            <Password>secrets</Password>
        </PrivateKeys>
        <TradingPartnerCertificates>
            <Path>repository/certs/partnerkeys.jks</Path>
            <Password>nosecrets</Password>
        </TradingPartnerCertificates>
        <TrustedCertificates>
            <Path>repository/certs/trustedcerts.jks</Path>
            <Password>trusted</Password>
        </TrustedCertificates>
    </Keystores>
</CertManagerConfiguration>
